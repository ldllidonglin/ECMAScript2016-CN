## 5.1 句法和词法文法

### 5.1.1 上下文无关的文法

一个_上下文无关文法_是由一定数量的产生式组成的。每个产生式的左边都有一个称为非终结符的抽象符号。右边\(right-hand side\) 是零或多个非终结符和终结符\(terminal symbols\)的有序排列。任何文法，它的终结符都来自指定的字母集。

一个_链式产生式_是那种右边只有一个非终结符和0个或多个终结符的产生式

当从一个叫做 _目标符_ \(goal symbol\) 的特殊非终端符组成的句子起始，那么给出的上下文无关文法就表示 语言 \(language\)，即，将产生式右边序列的非终结符当作左边，进行反复替换的结果就成为可能的终结符序列集合（可能无限）。

### 5.1.2 词法和正则的文法

第11章中给出了ECMAScript的词法文法。这个文法的终结符是Unicode代码单元，其符合10.1中规定的源代码规则。它定义了一序列的产生式，从目标符InputElementDiv，InputElementTemplateTail，InputElementRegExp，或者InputElementRegExpOrTemplateTail开始，描述了如何将代码单元序列转译为输入元素序列。

空白和注释之外的输入元素构成 ECMAScript 语法文法的终结符，它们被称为 ECMAScript 的 tokens。这些 tokens 是ECMAScript 语言中的保留字，标识符，字面量，标点符号。此外，行结束符虽然不被视为 tokens，但会成为输入元素流的一部分，用于指导处理自动插入分号机制（11.9）。空白和单行注释会被丢弃，不会出现在语法文法的输入元素流中。如果一个 多行注释 \(MultiLineComment\)（即形式为“/ ... /”的注释，不管是否跨越多行）不包含行结束符也会简单地丢弃，但如果一个 多行注释 包含一个或多个结束符，那么，注释会被替换为一个行结束符，成为语法文法输入元素流的一部分。

21.2.1给出了 ECMAScript 的 正则文法 \(RegExp grammar\)。此文法的终结符字符也由 SourceCharacter 定义。它定义了一套产生式，从目标符 Pattern 起始，描述了如何将这样的字符序列翻译成一个正则表达式模式。

两个冒号“::”作为分隔符分割词法和正则的文法产生式。词法和正则的文法共享某些产生式。

### 5 .1.3 数字字符串文法

另一个将字符串转换为数字值的一种文法，此文法与词法文法的一部分（和数字字面量相关的）类似，并且有终结符 SourceCharacter。此文法出现在 7.1.3.1 。

三个冒号“:::”作为分隔符分割数字字符串文法的产生式。

### 5.1.4 语法文法

第11、12、13、14、15章给出了ECMAScript语法文法的定义，这个文法把词法文法定义的ECMAScript tokens作为其终结符。其定义了一组产生式，从Script或者Module这两个目标符号开始。其描述了怎样的token序列才是语法正确的，从而组成ECMAScript程序。

当一个字符流被解析为 ECMAScript 的Script或者Module，它首先会反复应用词法文法将其转换为一个输入元素流；然后再应用语法文法解析这个输入元素流为单应用。当输入元素流没有更多 tokens 时，如果 tokens 不能解析为单实例的目标非终结符（Script或者Module）的单一实例，那么意味着程序在语法上存在错误。

只用一个冒号“:”作为分隔符分割语法词法的产生式。

事实上第 11、12、13 、14、15 章给出的语法语法，并不能完全说明一个正确的 ECMAScript 程序能接受的 token 序列。一些额外的 token 序列也能被接受，即某些特殊位置（如行结束符前）加入分号可以被文法接受。此外，文法描述的某些 token 序列也可能不被文法接受，如一个行结束符出现在“尴尬”的位置。

在某些情况下，为了避免出现歧义，语法文法使用广义产生式允许token序列不构成一个有效的ECMAScript Script或者Module。比如，这个技术运用在对象字面量和对象解构赋值模式中，在这种情况下会有一个更严格的补充语法，从而更严格的限制可接受的token序列。在某些上下文中，当明确的定义了这个产生式的输入元素，会再次被补充语法的目标符号解析。当输入流中没有剩余token，并且其token不能被文法解析为相应的补充文法目标符号单例时，说明输入流中有语法错误。















